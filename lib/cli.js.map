{"version":3,"file":"cli.js","sources":["../src/cli.js"],"sourcesContent":["#!/usr/bin/env node\r\n\r\nconst path = require(\"path\");\r\nconst sade = require(\"sade\");\r\nconst qunit = require(\"./index\");\r\n\r\nconst program = sade(\"qunit-coverage\");\r\n\r\nprogram.version(\"0.4.0\"); // TODO: How to keep this up to date?\r\n\r\nprogram\r\n\t.command(\"test <file>\", \"\", { default: true })\r\n\t.option(\"-c, --coverage\", \"Evaulate Istanbul coverage\", true)\r\n\t.option(\"-v, --verbose\", \"Perform additional logging\", true)\r\n\t.option(\"-t, --timeout\", \"Set a timeout to fail the process after\", 5000)\r\n\t.option(\"-o, --output\", \"Set an output directory for additional coverage format outputs\", \".\")\r\n\t.option(\"-f, --formats\", \"Output test coverage in different formats\")\r\n\t.describe(\"Runs the QUnit test runner for the given fixture.\")\r\n\t.example(\"qunit-coverage test/fixture.html\")\r\n\t.example(\"qunit-coverage test/fixture.html -o coverage -f json,html\")\r\n\t.example(\"qunit-coverage test test/fixture.html\")\r\n\t.action(async (file, options) => {\r\n\t\ttry {\r\n\t\t\tconst formats = options.formats ? options.formats.split(\",\").filter(format => format) : [];\r\n\t\t\tconst coverage = formats.length && options.coverage ? { output: path.resolve(options.output), formats } : options.coverage;\r\n\r\n\t\t\tconst results = await qunit(file, { verbose: options.verbose, timeout: options.timeout, coverage });\r\n\r\n\t\t\tprocess.exit(results.pass ? 0 : 1);\r\n\t\t} catch (ex) {\r\n\t\t\t// TODO: Log the exception?\r\n\t\t\tprocess.exit(1);\r\n\t\t}\r\n\t});\r\n\r\nprogram.parse(process.argv);\r\n"],"names":["const","path","require","sade","qunit","program","version","command","default","option","describe","example","action","file","options","ex","process","exit","coverage","formats","split","filter","format","length","output","resolve","verbose","timeout","then","$await_2","pass","parse","argv"],"mappings":";AAEAA,IAAMC,EAAOC,QAAQ,QACfC,EAAOD,QAAQ,QACfE,EAAQF,QAAQ,WAEhBG,EAAUF,EAAK,kBAErBE,EAAQC,QAAQ,SAEhBD,EACEE,QAAQ,cAAe,IAAMC,SAAS,IACtCC,OAAO,iBAAkB,8BAA8B,GACvDA,OAAO,gBAAiB,8BAA8B,GACtDA,OAAO,gBAAiB,0CAA2C,KACnEA,OAAO,eAAgB,iEAAkE,KACzFA,OAAO,gBAAiB,6CACxBC,SAAS,qDACTC,QAAQ,oCACRA,QAAQ,6DACRA,QAAQ,yCACRC,gBAAcC,EAAMC,sGAQXC,cAERC,QAAQC,KAAK,8BATd,YAIiB,OAFVC,GADAC,EAAUL,EAAQK,QAAUL,EAAQK,QAAQC,MAAM,KAAKC,gBAAOC,UAAUA,QACrDC,QAAUT,EAAQI,UAAaM,OAAQvB,EAAKwB,QAAQX,EAAQU,gBAASL,GAAYL,EAAQI,SAE5Fd,EAAMS,GAAQa,QAASZ,EAAQY,QAASC,QAASb,EAAQa,iBAAST,IAAxEU,4BAEhBZ,QAAQC,KAFQY,EAEKC,KAAO,EAAI,sCACxBf,YAMXV,EAAQ0B,MAAMf,QAAQgB"}